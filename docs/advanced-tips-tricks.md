# 高级使用技巧 (Advanced tips and tricks)

## 内存使用与缓存

`w3af` 使用各种类型的缓存来加快扫描过程，其中最重要的一个是内存中缓存，该缓存保存解析 HTTP 响应正文的结果。在 `w3af` 占用大量 CPU 的进程中解析 HTTP 响应主体，并且不同的插件可能希望解析相同的响应，因此在这种情况下使用缓存非常有意义。

ParserCache 是一个基于 LRU 算法的缓存，他会保存一些解析结果在内存中，以提供快速访问。某些高级用户可能会注意到这个缓存的 size 被设置成了一个常数 （在写这个文档时候是设置为 10 ），这可以导致以下的影响：

* `w3af` 将消耗大约 250 MB 的 RAM，其中大部分是由缓存消耗的。 
* 在可用 RAM 较低的系统上运行时，占用 大约250MB的 RAM 是很好的选择，因为我们要避免操作系统将页交换到磁盘。
* 如果运行 `w3af` 的系统用用超过 8G 以上的可用内存， `w3af` 可能会向缓存中添加更多项目，并增加缓存命中率，减少CPU使用率和总体扫描时间。

大部分用户在使用 `w3af` 时不会注意到这些高级调整，但可以随时将 `CACHE_SIZE = 10` 调整为适合您需要的任何值。

为了调试高速缓存命中率（应随 CACHE_SIZE 的增加而增加），你可以在 `W3AF_CORE_PROFILING` 环境变量设置为 `1` 的情况下运行 `w3af`，然后仔细检查 `/tmp/w3af-*.core` 下的 JSON 文件。
